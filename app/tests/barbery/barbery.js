function l(r,t){if(typeof r!=typeof t)return!1;if(typeof r=="object"){if(Array.isArray(r)){if(Array.isArray(t)){if(r.length!==t.length)return!1;for(let n=0;n<r.length;n++)if(!l(r[n],t[n]))return!1;return!0}return!1}if(Array.isArray(t))return!1;if(Object.prototype.toString.call(r)==="[object Object]"){if(Object.prototype.toString.call(t)==="[object Object]"){let n=Object.keys(r),s=Object.keys(t);if(n.length!==s.length)return!1;for(let u=0;u<n.length;u++){let p=n[u];if(!l(r[p],t[p]))return!1}return!0}return!1}if(Object.prototype.toString.call(t)==="[object Object]")return!1}return typeof r=="number"||typeof t=="number"?r+1e-7>=t&&r-1e-7<=t:r===t}function q(r,t){return!l(r,t)}function z(r){return Object.prototype.toString.call(r)==="[object Object]"?Object.values(r):r}function P(r){return Object.prototype.toString.call(r)==="[object Object]"?Object.entries(r):r.entries()}function e(r,t){if(r!=t)throw new Error(`Bad number of parameters
  Expected: `+t+`
    Actual: `+r)}function g(r,t){let n=r.length;if(n!=t)throw new Error("Bad number of parameters in "+r+`
  Expected: `+t+`
    Actual: `+n)}function m(r){if(typeof r=="number"&&!Number.isFinite(r))throw new Error("Bad Number "+r);if(r==null)throw new Error("Null expression "+r);return r}function c(r){if(e(arguments.length,1),typeof r=="boolean")return r;if(Array.isArray(r))return r.length!=0;throw new Error(`
Expected: boolean or Array.
   Found: `+r)}function i(r){e(arguments.length,1),console.log(E(r))}function E(r){return e(arguments.length,1),r==null?"<null>":lr(r)==="[object Object]"?JSON.stringify(r):r.toString()}function lr(r){return e(arguments.length,1),typeof r=="object"?Object.prototype.toString.call(r):typeof r}function W(r,t){return e(arguments.length,2),r.join(t)}function L(r,t){e(arguments.length,2),r<0&&r==0;let n=[];if(n.length=r,typeof t=="object")if(Array.isArray(t))for(let s=0;s<r;++s)n[s]=t.slice();else throw new Error(`
Expected: boolean, number, string or Array.
   Found: `+o);else for(let s=0;s<r;++s)n[s]=t;return n}function b(r,t){e(arguments.length,2),r.push(t)}function Y(r){if(e(arguments.length,1),r.length==0)throw new Error("Array is empty");return r.shift()}function w(r){return e(arguments.length,1),r.length}function y(r,t){if(e(arguments.length,2),r.length===0)throw new Error("Template is empty");let n=0,s=0,u=[];for(;;){let p=r.indexOf("%",s);if(p===-1)break;if(u.push(r.substring(s,p)),s=p+1,s===r.length)throw new Error("Template ends at '%'");let M=r.charAt(s);if(M==="%")u.push("%"),++s;else if(M==="v"){if(n>=t.length)throw new Error("Missing values replacing '"+r+"'");u.push(E(t[n++])),++s}else throw new Error("Character after '%' ("+M+") is not '%' nor 'v'")}if(n!==t.length)throw new Error("Extra values replacing '"+r+"'");return u.push(r.substring(s)),u.join("")}function dr(r,t){return e(arguments.length,2),g(t,0),new Promise(n=>{setTimeout(()=>{n(t())},r)})}async function J(r,t){if(e(arguments.length,2),g(t,0),!r[0])throw new Error("Timer has been stopped");async function n(){let s=await dr(r[1],t);return r[0]?n():s}return await n()}function h(r){if(e(arguments.length,1),!r[0])throw new Error("Timer is not running");r[0]=!1}function x(r,t){e(arguments.length,2);let n=new Date().getTime();return n-r[0]>t?(r[0]=n,!1):!0}function S(r){e(arguments.length,1),g(r,2);let t=[!1],n=[!0,1];return J(n,()=>r(t,n)),t}function A(r){return e(arguments.length,1),Math.trunc(Math.random()*Math.trunc(r))}function G(r){return e(arguments.length,1),Object.is(r,-0)&&(r=0),""+r}function v(){return e(arguments.length,0),new Date().getTime()}var X=4e4,B=2800,_=3e3;var N=[!1],br=[v()];function Q(r,t){e(arguments.length,2),!x(br,X)&&(i("Clock: Time is over"),N[0]=!0,h(t),r[0]=!0)}var j=[!0],f=[!1],d=[],$=m(L(4,""));function rr(){return e(arguments.length,0),l(w(d),4)}function tr(){return e(arguments.length,0),l(w(d),0)}function V(){e(arguments.length,0);let r=[""];for(let t of z($))l(t,"")?b(r,"-"):b(r,t);return b(r,""),W(r,"|")}function er(){e(arguments.length,0),f[0]=!0,j[0]=!1}function nr(){e(arguments.length,0),f[0]=!1}function sr(r){e(arguments.length,1);let t=m(w(d));if(t>=4)throw Error("Barbery is full");let n=m(A(4-t)),s=[0],u=[-1];for(let p=0;p<w($);++p)if(l($[p],"")){if(l(s[0],n)){u[0]=p;break}s[0]+=1}if(l(u[0],-1))throw Error("Sit not found");b(d,r),$[u[0]]=r,i(y("Shop: %v",[V()]))}function or(){if(e(arguments.length,0),!c(d))throw Error("Barbery is empty");let r=m(Y(d));for(let[t,n]of P($))if(l(n,r)){$[t]="";break}return r}var C=[-1],F=[0],U=[!1];function wr(r){e(arguments.length,1),i(y("Barber: Cutting hair to %v",[r])),i(y("Shop: %v",[V()]))}function ir(r,t){if(e(arguments.length,2),!c(f[0])&&j[0]){if(C[0]<0){i("Barber: Go out from home"),C[0]=m(v());return}if(x(C,1e3))return;i("Barber: Open barbery"),er()}if(!x(C,F[0])){if(!c(r[0])){let n=[""];N[0]&&f[0]&&(i("Barber: Close barbery"),nr()),tr()?c(f[0])?c(U[0])||(U[0]=!0,i("Barber: Barber is sleeping")):r[0]=!0:(U[0]=!1,n[0]=m(or())),q(n[0],"")?(wr(n[0]),F[0]=m(_)):c(r[0])||(F[0]=10);return}h(t),r[0]=!0}}var ur=[0],Sr=[0],mr=[1+A(B)];function pr(r,t){if(e(arguments.length,2),j[0]||f[0]){if(x(Sr,mr[0]))return;mr[0]=1+A(B),ur[0]+=1,jr(Ar(ur[0]));return}h(t),r[0]=!0}function Ar(r){return e(arguments.length,1),G(r)}function jr(r){e(arguments.length,1);function t(n){e(arguments.length,1),i(y("Client %v: %v",[r,n]))}t("Arrive to barbery"),c(f[0])?rr()?t("Go out because barbery is full"):sr(r):t("Go out because barbery is close")}var Or=m(S(Q)),Dr=m(S(pr)),vr=m(S(ir));S(function(r,t){e(arguments.length,2),Or[0]&&Dr[0]&&vr[0]&&(i("Program end."),h(t),r[0]=!0)});
